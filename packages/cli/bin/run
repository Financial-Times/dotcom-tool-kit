#!/usr/bin/env node

const { load, runCommand } = require('../lib')

const [command, ...argv] = process.argv.slice(2)

async function main() {
   try {
      await load()
      await runCommand(command, argv)
   } catch(error) {
      if(error.details) {
         console.error(error.message + '\n\n' + error.details)
      } else {
         console.error(error.stack)
      }

      process.exitCode = error.exitCode || 1
   }
}

main()
