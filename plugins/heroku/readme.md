# @dotcom-tool-kit/heroku

This plugin handles deploying apps to Heroku. It also manages Tool Kit hooks that are run during Heroku builds.

This plugin will be installed as a dependency of the [frontend-app](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/frontend-app) and [backend-heroku-app](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/backend-heroku-app) plugins so you do not need to install it separately if you are using either of those plugins.

## Installation

Install `@dotcom-tool-kit/heroku` as a `devDependency` in your app:

```sh
npm install --save-dev @dotcom-tool-kit/heroku
```

Add the plugin to your [Tool Kit configuration](https://github.com/financial-times/dotcom-tool-kit/blob/main/readme.md#configuring-tool-kit):

```yaml
plugins:
  - '@dotcom-tool-kit/heroku'
```

<!-- begin autogenerated docs -->
## Tasks

### `HerokuProduction`

Promote the Heroku staging app to production.

#### Task options

`scaling`: an object with scaling configuration for each app and dyno. The first-level keys are the names of your production apps, and the second level keys are names of the dynos within each app (this should usually at least include `web`).

##### Scaling configuration

| Property | Description | Type |
|-|-|-|
| `size` | the [Dyno type](https://devcenter.heroku.com/articles/dyno-types) for this dyno, e.g. `standard-1x`. apps in the FT Heroku account can only use [professional tier dynos](https://devcenter.heroku.com/articles/dyno-types#dyno-tiers-and-mixing-dyno-types). | `string` |
| `quantity` | how many of this dyno to use | `number` |

##### Example

~~~yml
options:
  tasks:
    HerokuProduction:
      scaling:
        ft-next-static-eu:
          web:
            size: standard-1x
            quantity: 1
~~~

<!-- hide autogenerated schema docs -->


### `HerokuStaging`

Deploy to the Heroku staging app.

### `HerokuReview`

Create and deploy a Heroku review app.

### `HerokuTeardown`

Scale down the Heroku staging app once it's no longer needed.


## Plugin-wide options

### `@dotcom-tool-kit/heroku`

| Property            | Description                                                                                                     | Type     |
| :------------------ | :-------------------------------------------------------------------------------------------------------------- | :------- |
| **`pipeline`** (\*) | the ID of your app's Heroku pipeline. this can be found at https://dashboard.heroku.com/pipelines/[PIPELINE_ID] | `string` |

_(\*) Required._
<!-- end autogenerated docs -->
