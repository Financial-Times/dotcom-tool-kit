// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`circleci-npm config integration test should generate a .circleci/config.yml with the base config from circleci-npm/.toolkitrc.yml 1`] = `
"version: 2.1
executors:
  node:
    docker:
      - image: cimg/node:20.19-browsers
jobs:
  checkout:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - persist_to_workspace:
          root: .
          paths:
            - .
  build:
    executor: node
    steps:
      - attach_workspace:
          at: .
      - run:
          name: build
          command: npx dotcom-tool-kit build:ci
      - persist_to_workspace:
          root: .
          paths:
            - .
  test:
    executor: node
    steps:
      - attach_workspace:
          at: .
      - run:
          name: test
          command: npx dotcom-tool-kit test:ci
      - persist_to_workspace:
          root: .
          paths:
            - .toolkitstate
  publish-tag:
    executor: node
    steps:
      - attach_workspace:
          at: .
      - run:
          name: publish-tag
          command: npx dotcom-tool-kit publish:tag
      - persist_to_workspace:
          root: .
          paths:
            - .toolkitstate
workflows:
  tool-kit:
    when:
      not:
        equal:
          - scheduled_pipeline
          - << pipeline.trigger_source >>
    jobs:
      - checkout:
          filters:
            tags:
              only: /^v\\d+\\.\\d+\\.\\d+(-.+)?/
      - setup:
          executor: node
          requires:
            - checkout
          filters:
            tags:
              only: /^v\\d+\\.\\d+\\.\\d+(-.+)?/
      - build:
          requires:
            - setup
          filters:
            tags:
              only: /^v\\d+\\.\\d+\\.\\d+(-.+)?/
      - test:
          requires:
            - build
          filters:
            tags:
              only: /^v\\d+\\.\\d+\\.\\d+(-.+)?/
      - publish-tag:
          requires:
            - test
          filters:
            tags:
              only: /^v\\d+\\.\\d+\\.\\d+(-.+)?/
            branches:
              ignore: /.*/
          context: npm-publish-token
  nightly:
    when:
      and:
        - equal:
            - scheduled_pipeline
            - << pipeline.trigger_source >>
        - equal:
            - nightly
            - << pipeline.schedule.name >>
    jobs:
      - checkout
      - setup:
          executor: node
          requires:
            - checkout
      - build:
          requires:
            - setup
      - test:
          requires:
            - build
  pr-close:
    jobs:
      - checkout:
          requires: []
      - setup:
          requires:
            - checkout
    when: >
      pipeline.trigger_source != "scheduled_pipeline" and

      (pipeline.event.name == "pull_request" and pipeline.event.action ==
      "closed")
"
`;
