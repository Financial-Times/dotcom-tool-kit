# @dotcom-tool-kit/webpack

Tool Kit plugin to run [Webpack](https://webpack.js.org)

## Installation & usage

With Tool Kit [already set up](https://github.com/financial-times/dotcom-tool-kit#installing-and-using-tool-kit), install this plugin as a dev dependency:

```sh
npm install --save-dev @dotcom-tool-kit/webpack
```

And add it to your repo's `.toolkitrc.yml`:

```yml
plugins:
  - '@dotcom-tool-kit/webpack'
```

### Building with Webpack locally

For local development, by default the `WebpackDevelopment` task runs on the `build:local` command, and `WebpackWatch` runs on `run:local`. One plugin that provides these commands is [`npm`](../npm), allowing you to run Webpack with `npm run build` and `npm start`. `WebpackWatch` runs Webpack in the background, allowing it to run alongside your other tasks that run on `run:local`, which lets you run e.g. your app with the [`node`](../node) plugin in parallel with Webpack.

### Building with Webpack on CI and remote apps

The `WebpackProduction` task runs on the `build:ci` and `build:remote` commands by default. `build:ci` is for compiling an app's source in CI jobs, and is provided by plugins like [`circleci`](../circleci/). `build:remote` compiles an app for running on a production or testing server, and can be provided by plugins like [`heroku`](../heroku/).

### Running on another command
You can also configure Webpack to run on any other command; for example, if you want to run it with `npm run test` via the `npm` plugin, you can manually configure Webpack to run on `npm`'s `test:local` command:

```yml
plugins:
  - '@dotcom-tool-kit/webpack'
  - '@dotcom-tool-kit/npm'
command:
  'test:local':
    Webpack:
      mode: development
```

<!-- begin autogenerated docs -->
## Tasks

### `Webpack`

Bundle code with `webpack`.
#### Task options

| Property           | Description                                                                 | Type                            |
| :----------------- | :-------------------------------------------------------------------------- | :------------------------------ |
| `configPath`       | path to a Webpack config file. Webpack will default to `webpack.config.js`. | `string`                        |
| **`envName`** (\*) | set Webpack's [mode](https://webpack.js.org/configuration/mode/).           | `'production' \| 'development'` |
| `watch`            | run Webpack in watch mode                                                   | `boolean`                       |

_(\*) Required._
<!-- end autogenerated docs -->
