# dotcom-tool-kit/containerised-app

A bootstrap plugin that provides the minimum required Tool Kit plugins for a containerised application that's deployed to Amazon Elastic Container Service (ECS).

  - [`@dotcom-tool-kit/aws`](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/aws)
  - [`@dotcom-tool-kit/cloudsmith`](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/cloudsmith)
  - [`@dotcom-tool-kit/docker`](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/docker)
  - [`@dotcom-tool-kit/doppler`](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/doppler)
  - [`@dotcom-tool-kit/hako`](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/hako)
  - [`@dotcom-tool-kit/node`](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/node)

This bootstrap plugin is also preconfigured to run the `Node` task on the command `run:local`.

## Installation & Usage

With Tool Kit [already set up](https://github.com/financial-times/dotcom-tool-kit#installing-and-using-tool-kit), install this plugin as a dev dependency:

```sh
npm install --save-dev @dotcom-tool-kit/containerised-app
```

And add it to your repo's `.toolkitrc.yml`:

```yml
plugins:
  - '@dotcom-tool-kit/containerised-app'
```

As well as the plugin options outlined below, you'll need to specify plugin options for the `cloudsmith` and `docker` plugins. The bare minimum is:

```yml
options:
  plugins:
    '@dotcom-tool-kit/cloudsmith':
      serviceAccount: <SERVICE_ACCOUNT_WITH_WRITE_ACCESS>
    '@dotcom-tool-kit/docker':
      images:
        web:
          name: <YOUR_APP_NAME>
```

See the relevant documentation for further options:

  - [`@dotcom-tool-kit/cloudsmith` plugin options](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/cloudsmith#plugin-wide-options)
  - [`@dotcom-tool-kit/docker` plugin options](https://github.com/Financial-Times/dotcom-tool-kit/tree/main/plugins/docker#plugin-wide-options)


<!-- begin autogenerated docs -->
## Plugin-wide options

### `@dotcom-tool-kit/containerised-app`

| Property                        | Description                                                                | Type                                             | Default                |
| :------------------------------ | :------------------------------------------------------------------------- | :----------------------------------------------- | :--------------------- |
| **`awsRoleArnStaging`** (\*)    | the ARN of an IAM role to assume when deploying to staging                 | `string` (_regex: `/^arn:aws:iam::\d+:role\//`_) |                        |
| **`awsRoleArnProduction`** (\*) | the ARN of an IAM role to assume when deploying to production              | `string` (_regex: `/^arn:aws:iam::\d+:role\//`_) |                        |
| `hakoReviewEnvironments`        | the set of Hako environments to deploy to in the deploy:review command     | `Array<string>`                                  | `["ft-com-review-eu"]` |
| `hakoStagingEnvironments`       | the set of Hako environments to deploy to in the deploy:staging command    | `Array<string>`                                  | `["ft-com-test-eu"]`   |
| `hakoProductionEnvironments`    | the set of Hako environments to deploy to in the deploy:production command | `Array<string>`                                  | `["ft-com-prod-eu"]`   |

_(\*) Required._
<!-- end autogenerated docs -->
